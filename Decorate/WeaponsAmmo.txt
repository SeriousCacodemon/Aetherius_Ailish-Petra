// Ailish specific version of the Serpent Staff from Hexen.  Runs off of MP
// instead of Blue Mana...

actor SerpentStaffAilish : CWeapStaff
{
	Inventory.PickupMessage "You got the Serpent Staff!"
	Obituary "$OB_MPCWEAPSTAFFM"
	Tag "Serpent Staff"
	Weapon.AmmoUse1 0
	Weapon.AmmoGive1 0
	Weapon.AmmoType "None"
	States
	{
	Select:
		CSSF C 0 A_Raise
		CSSF C 1 A_Raise
		Loop
	Deselect:
		CSSF B 3
		CSSF C 4
		CSSF C 0 A_Lower
		CSSF C 1 A_Lower
		Wait
	Fire:
		CSSF A 1 Offset (0, 45) A_CStaffCheck
		CSSF A 0 A_JumpIf(ACS_NamedExecuteWithResult("UseManaAttack",1,2) == 0, "Ready")
		CSSF J 1 Offset (0, 50) A_CStaffAttack
		CSSF J 2 Offset (0, 50)
		CSSF J 2 Offset (0, 45)
		CSSF A 2 Offset (0, 40)
		CSSF A 2 Offset (0, 36)
		Goto Ready + 2
	}
}

// Petra-specfic version with more comboability...
// What HP amount do I equate 32000 with?  Belphegor specific HP?
Actor EtherStock : Ammo
{
	Inventory.PickupMessage "Picked up Ether Stock (3 units)."
	Inventory.Icon "ACMFULL"
	Inventory.Amount 3
	Inventory.MaxAmount 12
	Ammo.BackPackAmount 3
	Ammo.BackPackMaxAmount 12
}

actor AChristina : Weapon
{
Inventory.PickupMessage "Found Alexandra Christina!  Ether-charged pew pew!"
XScale 0.350
YScale 0.292
weapon.selectionorder 400
Obituary "%o got blammed by %k's A. Christina."
+SPAWNSOUNDSOURCE
states
{
Select:
ACHG A 1 A_Raise
loop
Deselect:
ACHG A 1 A_Lower
loop
Fire:
	  ACHG B 0 BRIGHT
	  {
		A_PlaySound("PetraHeavyAttack",CHAN_VOICE);
		A_PlaySound("AChristina/Shoot1",CHAN_WEAPON);
	  }
      ACHF A 1 BRIGHT A_SpawnItemEx("AChristinaShot",45,5,34,0,0,0)
      ACHG CDC 1
     	 ACHG A 10
	  ACHG A 1 A_ReFire
Goto Ready
AltFire:
AltHold:
		ACHG B 0 A_JumpIfInventory("EtherStock",1,"AltHoldCharged")
		ACHG B 0 BRIGHT A_PlayWeaponSound("AChristina/LongRangeShoot")
		ACHF B 1 A_FireBullets(0,0,1,0,"AChristinaPuff",FBF_NORANDOM)//1024,"",0,0)
		ACHG FGF 1
		ACHG A 12
		ACHG A 1 A_ReFire
		Goto Ready
AltHoldCharged:
		ACHG B 0
		{
			A_PlaySound("PetraRangedAttackVoice1",CHAN_VOICE);
			A_PlaySound("AChristina/LongRangeShoot",CHAN_WEAPON);			
		}
		ACHF A 0 A_TakeInventory("EtherStock",1)
		ACHF A 1 A_FireBullets(0,0,1,0,"AChristinaPuffCharged",FBF_NORANDOM)//1024,"",0,0)
		ACHG CDC 1
		ACHG A 8
		ACHG B 0
		{
			A_PlaySound("PetraRangedAttackVoice2",CHAN_VOICE);
			A_PlaySound("AChristina/LongRangeShoot",CHAN_WEAPON);			
		}
		ACHF A 1 A_FireBullets(0,0,1,0,"AChristinaPuffCharged",FBF_NORANDOM)//1024,"",0,0)
		ACHG CDC 1
		ACHG A 8
		ACHG A 0 A_JumpIfInventory("EtherStock",1,2)
		ACHG A 0 A_Refire("AltFire")
		goto Ready
		ACHG A 1 A_Refire("AltHoldCharged2")
		goto Ready
AltHoldCharged2:
		ACHG B 0
		{
			A_PlaySound("PetraRangedAttackVoice3",CHAN_VOICE);
			A_PlaySound("AChristina/LongRangeShoot",CHAN_WEAPON);			
		}
		ACHF A 0 A_TakeInventory("EtherStock",1)
		ACHF B 1 A_FireBullets(0,0,1,0,"AChristinaPuffCharged",FBF_NORANDOM)//1024,"",0,0)
		ACHG FGF 1
		ACHG A 8
		ACHG B 0 A_PlaySound("AChristina/LongRangeShoot",CHAN_WEAPON)			
		ACHF A 1 A_FireBullets(0,0,1,0,"AChristinaPuffCharged",FBF_NORANDOM)//1024,"",0,0)
		ACHG CDC 1
		ACHG A 8
		ACHG A 0 A_JumpIfInventory("EtherStock",1,2)
		ACHG A 0 A_Refire("AltFire")
		goto Ready
		ACHG A 1 A_Refire("AltHoldCharged3")
		goto Ready
AltHoldCharged3:
		ACHG B 0
		{
			A_PlaySound("PetraRangedAttackVoice4",CHAN_VOICE);
			A_PlaySound("AChristina/LongRangeShoot",CHAN_WEAPON);			
		}
		ACHF A 0 A_TakeInventory("EtherStock",1)
		ACHF B 1 A_FireBullets(0,0,1,0,"AChristinaPuffChargedFinal",FBF_NORANDOM)//1024,"",0,0)
		ACHG FGF 1
		ACHG A 24
		ACHG A 0 A_Refire
		goto Ready
BouncingShot:
		ACHG A 6
		ACHF A 0
		{
			A_PlaySound("PetraRangedAttackVoice2",CHAN_VOICE);
			A_PlaySound("AChristina/LongRangeShoot",CHAN_WEAPON);			
			A_TakeInventory("EtherStock",1);
		}
		ACHF B 1 A_FireBullets(0,0,1,0,"AChristinaPuffChargedFinal",FBF_NORANDOM)//1024,"",0,0)
		ACHG FGF 1
		ACHG A 24
		ACHG A 0 A_Refire
		goto Ready
User2:
		ACHG H 16
		ACHG A 4
		{
			A_PlaySound("PetraReloadVoice",CHAN_VOICE);
			A_GiveInventory("EtherStock",3);
		}
		ACHG IJI 4
		ACHG A 6
		goto Ready
Ready:
ACHG A 1 A_WeaponReady(WRF_ALLOWUSER2)
Loop
Spawn:
VUPP A -1 Bright
stop
}
}

Actor AChristinaCyberdemon : AChristina { Inventory.PickupMessage "Alexandra Christina gains ability to fire Cyberdemon rockets!" }
Actor AChristinaMastermind : AChristina { Inventory.PickupMessage "Alexandra Christina gains ability to fire like Spider Mastermind's Super Chaingun!" }
Actor AChristinaHades : AChristina { Inventory.PickupMessage "Alexandra Christina gains ability to use Hades Elemental/Overlord's dark lightning!" }
Actor AChristinaIronLich : AChristina { Inventory.PickupMessage "Alexandra Christina gains ability to conjure Iron Lich's spells!" }
Actor AChristinaMaulotaur : AChristina { Inventory.PickupMessage "Alexandra Christina gains ability to use Maulotaur's magical fire!" }
Actor AChristinaWyvern : AChristina { Inventory.PickupMessage "Alexandra Christina gains ability to use Death Wyvern's exploding fireballs!" }
Actor AChristinaHeresiarch : AChristina { Inventory.PickupMessage "Alexandra Christina gains ability to use Heresiarch magic (minus the barrier)!" }

Actor AChristinaPartinias : AChristina { Inventory.PickupMessage "Alexandra Christina gains ability to... use Partinias's heartful magic?!" }

actor AChristinaShot : Actor
{
		Radius 11
		Height 8
		XScale 0.255 // 0.24
        YScale 0.213 // 0.20
		Speed 0
		+FORCERADIUSDMG
		DamageType "Ether"
		Projectile
		Renderstyle "Add"
		SeeSound ""
		DeathSound ""
        Obituary "%o got blammed by %k's A. Christina."
		States
		{
		Spawn:
		CHRP A 1 BRIGHT
		//loop
		Death:
		CHRP A 0
		CHRP A 1 BRIGHT A_Explode(ACS_NamedExecuteWithResult("GetPlayerATKDMG",48,0),64,0,1,64)
		CHRP A 1 BRIGHT A_FadeOut(0.1)
		goto Death+2
		}
}

Actor AChristinaTracer : FastProjectile
{
   Damagetype "Ether"
   Radius 1
   Height 1
   Mass 5
   Speed 160 // 80
   PROJECTILE
   +DONTREFLECT
		+PUFFONACTORS
		+FORCEXYBILLBOARD
		+FORCERADIUSDMG
   Renderstyle Add
   Alpha 1.0
   Scale 0.5
   decal BulletChip
   States
   {
   Spawn:
      TNT1 A 0 NoDelay bright { A_ScaleVelocity(GetCVar("dvds_tracervelmulti")); }
   Idle:
      TNT1 A 0 bright
      TNT1 A 0 bright A_SpawnItemEx("ZombieBulletTracerTrail",-15.0,0,0,0,0,0,0,128,0)
      TNT1 A 0 bright A_SpawnItemEx("ZombieBulletTracerTrail",-12.5,0,0,0,0,0,0,128,0)
      TNT1 A 0 bright A_SpawnItemEx("ZombieBulletTracerTrail",-10.0,0,0,0,0,0,0,128,0)
      TNT1 A 0 bright A_SpawnItemEx("ZombieBulletTracerTrail",-7.5,0,0,0,0,0,0,128,0)
      TNT1 A 0 bright A_SpawnItemEx("ZombieBulletTracerTrail",-5.0,0,0,0,0,0,0,128,0)
      TNT1 A 0 bright A_SpawnItemEx("ZombieBulletTracerTrail",-2.5,0,0,0,0,0,0,128,0)
	  TNT1 A 1 bright A_SpawnItemEx("ZombieBulletTracerTrail",0.0,0,0,0,0,0,0,128,0)
      loop
	Death:
		CHRP C 0 A_SetScale(0.5,0.418)
		CHRP C 1 BRIGHT A_Explode(ACS_NamedExecuteWithResult("GetPlayerATKDMG",49,0,0),32,0,1,32)
		CHRP DEFGHIJKLMNOPQRSTUVW 1 BRIGHT
		stop
   }
}

actor AChristinaPuff : BulletPuff
{
		Radius 12
		Height 8
		Alpha 1
		Renderstyle "Add"
		VSpeed 0
		Mass 0
		+NOBLOCKMAP
		+NOGRAVITY
		+PUFFONACTORS
		+FORCEXYBILLBOARD
		+FORCERADIUSDMG
		DamageType "Ether"
		XScale 0.5 // 0.24
        YScale 0.418 // 0.20
		States
		{
		Spawn:
		CHRP C 0
		CHRP C 1 BRIGHT A_Explode(ACS_NamedExecuteWithResult("GetPlayerATKDMG",49,1,0),32,0,1,32,0,0,0,"Ether")
		CHRP DEFGHIJKLMNOPQRSTUVW 1 BRIGHT
		stop
		}
}

Actor AChristinaPuffCharged : AChristinaPuff
{
		States
		{
		Spawn:
		CHRP C 0
		CHRP C 1 BRIGHT A_Explode(ACS_NamedExecuteWithResult("GetPlayerATKDMG",53,1,0),32,0,1,32,0,0,0,"Ether")
		CHRP DEFGHIJKLMNOPQRSTUVW 1 BRIGHT
		stop
		}
}

Actor AChristinaPuffChargedFinal : AChristinaPuff
{
XScale 0.875
YScale 0.7524

		States
		{
		Spawn:
		CHRP C 0
		CHRP C 1 BRIGHT A_Explode(ACS_NamedExecuteWithResult("GetPlayerATKDMG",54,1,0),70,0,1,70,0,0,0,"Ether")
		CHRP DEFGHIJKLMNOPQRSTUVW 1 BRIGHT
		stop
		}
}
actor SauronGauntletsPetra : Weapon
{
  var int user_theta;
  +BLOODSPLATTER
  Weapon.SelectionOrder 3400
  +WEAPON.MELEEWEAPON
  Weapon.KickBack 140
  Obituary "$o was decked to the curb by %k's gauntlets of Sauron."
  Tag "Sauron's Gauntlets"

  Scale 0.825
  +FLOATBOB
  +WEAPON.BFG
  +WEAPON.NOALERT
  Inventory.PickupMessage "'\ciWell, what do we have here?  I know I'm not a pugilist type, but...\c-'"
  AttackSound "GauntletHit"

  States
  {
/*  DeggarisPickup:
    WGNT A 0 A_SpawnItemEX("SauronGauntlets")
    WGNT A 0 A_FadeOut(1.0)
    Loop
  IlluciaPickup:
    WGNT A 0 A_SpawnItemEX("SauronGauntletsIllucia")
    WGNT A 0 A_FadeOut(1.0)
    Loop
  FloraPickup:
    WGNT A 0 A_SpawnItemEX("SauronGauntletsFlora")
    WGNT A 0 A_FadeOut(1.0)
    Loop
  PetraPickup:
    WGNT A 0 A_SpawnItemEX("SauronGauntletsPetra")
    WGNT A 0 A_FadeOut(1.0)
    Loop
  NoMore:
    WGNT A 0 A_FadeOut(1.0)
    Loop*/
  Spawn:
    TNT1 A 0
    WGNT AAA 1
/*	{
	      if (ACS_NamedExecuteWithResult("GauntletsCheckCharacter") == 1) { return state("DeggarisPickup"); }
	 else if (ACS_NamedExecuteWithResult("GauntletsCheckCharacter") == 2) { return state("IlluciaPickup"); }
	 else if (ACS_NamedExecuteWithResult("GauntletsCheckCharacter") == 3) { return state("FloraPickup"); }
	 return state("");
	}*/
  SpawnSoundEmit:
    WGNT A 0 A_Stopsound(CHAN_ITEM)
    WGNT A 0 A_Playsound("SauronGauntlets/Hum",CHAN_ITEM)
    WGNT A 0 A_SetUserVar("user_theta",0)
  SpawnPhase1:
    WGNT AA 1
/*	{
	      if (ACS_NamedExecuteWithResult("GauntletsCheckCharacter") == 1) { return state("DeggarisPickup"); }
	 else if (ACS_NamedExecuteWithResult("GauntletsCheckCharacter") == 2) { return state("IlluciaPickup"); }
	 else if (ACS_NamedExecuteWithResult("GauntletsCheckCharacter") == 3) { return state("FloraPickup"); }
	 return state("");
	}*/
    WGNT A 0 A_SetUserVar("user_theta",user_theta+1)
    WGNT A 0 A_JumpIf(user_theta==70,"SpawnSoundEmit")
    loop

  Pickup:
    // Other Things
    TNT1 A 0 A_JumpIf(ACS_NamedExecuteWithResult("CheckPlayerIfDead") == 1,2)
    TNT1 A 0 A_PlaySound("generalequip", 5)
    TNT1 A 0 
    Stop
  Deselect:
    TNT1 A 0 
	{
	 if (ACS_NamedExecuteWithResult("MiscVarCheckDECORATE",10035) >= 2) { A_Lower; }
	 if (ACS_NamedExecuteWithResult("MiscVarCheckDECORATE",10035) >= 4) { A_Lower; }
	}
    TNT1 A 0 A_Lower
    GNTF A 1 A_Lower
    Loop
  Select:
    TNT1 A 0
	{
	 if (ACS_NamedExecuteWithResult("MiscVarCheckDECORATE",10035) >= 2) { A_Raise; }
	 if (ACS_NamedExecuteWithResult("MiscVarCheckDECORATE",10035) >= 4) { A_Raise; }
	}
    TNT1 A 0 A_Raise
    GNTF A 1 A_Raise
    Loop
  Ready:
    GNTF A 1
	{
	 A_WeaponReady(WRF_ALLOWUSER1);
	 if (random(1,100) <= 50) { A_ChangeFlag("WEAPON.MELEEWEAPON", TRUE); } else { A_ChangeFlag("WEAPON.MELEEWEAPON", FALSE); }
	}
    Loop
  Fire:
    TNT1 A 0 A_Jump(244,2)
    TNT1 A 0 A_AlertMonsters // Sometimes a swing will be enough to wake up all monsters in the area.
    TNT1 A 0 A_JumpIf(ACS_NamedExecuteWithResult("UseStaminaAttack",ACS_NamedExecuteWithResult("GetPunchStaminaUse",1),2) == 1, "PunchSuccess")
    goto Ready
  PunchSuccess:
    TNT1 A 0
    TNT1 A 0 A_Jump(224,2)
    TNT1 A 0 A_PlaySound("PetraMediumAttack",CHAN_VOICE)
    GNTP M 3
	{
	 if (ACS_NamedExecuteWithResult("MiscVarCheckDECORATE",10035) >= 3) { A_SetTics(2); }
	 A_PlaySound("GauntletSwing",CHAN_WEAPON);
     ACS_NamedExecute("GauntletFlashEffect",0,0,0,0);
	}
    GNTP N 3
	{
	 if (ACS_NamedExecuteWithResult("MiscVarCheckDECORATE",10035) >= 2) { A_SetTics(2); }
	 if (ACS_NamedExecuteWithResult("MiscVarCheckDECORATE",10035) >= 4) { A_SetTics(1); }
	 ACS_NamedExecute("GauntletFlashEffect",0,0,0,0);
	}
    TNT1 A 0 
	{
     ACS_NamedExecuteAlways("StartTensionCountDown");
	 if (CountInv("SpreaderAura2",AAPTR_PLAYER1) > 0)
	 {
      // Angle + 15, Pitch + 0
      A_SetAngle(angle+15);
      A_CustomPunch(ACS_NamedExecuteWithResult("GetPunchDamage",0),1,CPF_NOTURN,"GauntletPuff",ACS_NamedExecuteWithResult("GetMeleeRange",2));
      // Angle + 7.5, Pitch + 7.5
      A_SetAngle(angle-7.5);
      A_SetPitch(pitch+7.5);
      A_CustomPunch(ACS_NamedExecuteWithResult("GetPunchDamage",0),1,CPF_NOTURN,"GauntletPuff",ACS_NamedExecuteWithResult("GetMeleeRange",2));
      // Angle + 7.5, Pitch - 7.5
      A_SetPitch(pitch-15);
      A_CustomPunch(ACS_NamedExecuteWithResult("GetPunchDamage",0),1,CPF_NOTURN,"GauntletPuff",ACS_NamedExecuteWithResult("GetMeleeRange",2));
      // Angle + 0, Pitch + 0
      A_SetPitch(pitch+7.5);
      A_SetAngle(angle-7.5);
      A_CustomPunch(ACS_NamedExecuteWithResult("GetPunchDamage",0),1,CPF_NOTURN,"GauntletPuff",ACS_NamedExecuteWithResult("GetMeleeRange",2));
      // Angle - 7.5, Pitch - 7.5
      A_SetAngle(angle-7.5);
      A_SetPitch(pitch-7.5);
      A_CustomPunch(ACS_NamedExecuteWithResult("GetPunchDamage",0),1,CPF_NOTURN,"GauntletPuff",ACS_NamedExecuteWithResult("GetMeleeRange",2));
      // Angle - 7.5, Pitch + 7.5
      A_SetPitch(pitch+15);
      A_CustomPunch(ACS_NamedExecuteWithResult("GetPunchDamage",0),1,CPF_NOTURN,"GauntletPuff",ACS_NamedExecuteWithResult("GetMeleeRange",2));
      // Angle - 15, Pitch + 0
      A_SetPitch(pitch-7.5);
      A_SetAngle(angle-7.5);
      A_CustomPunch(ACS_NamedExecuteWithResult("GetPunchDamage",0),1,CPF_NOTURN,"GauntletPuff",ACS_NamedExecuteWithResult("GetMeleeRange",2));
      A_SetAngle(angle+15);
	 }
	 else
	 if (CountInv("SpreaderAura1",AAPTR_PLAYER1) > 0)
	 {
      A_SetAngle(angle+15);
      A_CustomPunch(ACS_NamedExecuteWithResult("GetPunchDamage",0),1,CPF_NOTURN,"GauntletPuff",ACS_NamedExecuteWithResult("GetMeleeRange",2));
      A_SetAngle(angle-15);
      A_CustomPunch(ACS_NamedExecuteWithResult("GetPunchDamage",0),1,CPF_NOTURN,"GauntletPuff",ACS_NamedExecuteWithResult("GetMeleeRange",2));
      A_SetAngle(angle-15);
      A_CustomPunch(ACS_NamedExecuteWithResult("GetPunchDamage",0),1,CPF_NOTURN,"GauntletPuff",ACS_NamedExecuteWithResult("GetMeleeRange",2));
      A_SetAngle(angle+15);
	 }
	 else
	 {
      A_CustomPunch(ACS_NamedExecuteWithResult("GetPunchDamage",0),1,CPF_NOTURN,"GauntletPuff",ACS_NamedExecuteWithResult("GetMeleeRange",2));
	 }

     A_TakeInventory("MeleeDestroyProjectiles",9999,0,AAPTR_PLAYER1);
	 if (CallACS("MiscVarCheckDECORATE",10035) == 0 && random(1,16) == 1) { A_GiveInventory("MeleeDestroyProjectiles",1,AAPTR_PLAYER1); }
	 if (CallACS("MiscVarCheckDECORATE",10035) == 1 && random(1,8) == 1) { A_GiveInventory("MeleeDestroyProjectiles",1,AAPTR_PLAYER1); }
	 if (CallACS("MiscVarCheckDECORATE",10035) == 2 && random(1,4) == 1) { A_GiveInventory("MeleeDestroyProjectiles",1,AAPTR_PLAYER1); }
	 if (CallACS("MiscVarCheckDECORATE",10035) == 3 && random(1,2) == 1) { A_GiveInventory("MeleeDestroyProjectiles",1,AAPTR_PLAYER1); }
	 if (CallACS("MiscVarCheckDECORATE",10035) >= 4 && random(1,1) == 1) { A_GiveInventory("MeleeDestroyProjectiles",1,AAPTR_PLAYER1); }
	 if (CountInv("MeleeDestroyProjectiles",AAPTR_PLAYER1) > 0)
	 {
	  A_SpawnItemEx ("ShieldPartPunchAttackNoReflect", 24, 0, 32, 0, 0, 0, 0, SXF_NOCHECKPOSITION);
	  A_SpawnItemEx ("ShieldPartPunchAttackNoReflect", 56, 0, 32, 0, 0, 0, 0, SXF_NOCHECKPOSITION);
	 }
     A_TakeInventory("MeleeDestroyProjectiles",9999,0,AAPTR_PLAYER1);
	}
    GNTP O 2
	{
	 if (ACS_NamedExecuteWithResult("MiscVarCheckDECORATE",10035) >= 3) { A_SetTics(1); }
	 ACS_NamedExecute("GauntletFlashEffect",0,0,0,0);
	}
    GNTP N 3
	{
	 if (ACS_NamedExecuteWithResult("MiscVarCheckDECORATE",10035) >= 3) { A_SetTics(2); }
	 ACS_NamedExecute("GauntletFlashEffect",0,0,0,0);
	}
    GNTP M 3
	{
	 if (ACS_NamedExecuteWithResult("MiscVarCheckDECORATE",10035) >= 2) { A_SetTics(2); }
	 if (ACS_NamedExecuteWithResult("MiscVarCheckDECORATE",10035) >= 4) { A_SetTics(1); }
	 ACS_NamedExecute("GauntletFlashEffect",0,0,0,0);
	 A_TakeInventory("MartArtsMaster1",9999);
	 A_TakeInventory("MartArtsMaster2",9999);
     A_ReFire;
	}
	GNTP B 0 A_TakeInventory("UsingMeleeAttack",9999,0,AAPTR_PLAYER1)
    Goto Ready

  AltFire:
    TNT1 A 0 A_Jump(200,2)
    TNT1 A 0 A_AlertMonsters // Sometimes a swing will be enough to wake up all monsters in the area.
    TNT1 A 0 A_JumpIf(ACS_NamedExecuteWithResult("UseStaminaAttack",ACS_NamedExecuteWithResult("GetPunchStaminaUse",2),2) == 1, "AltPunchSuccess")
    goto Ready
  AltPunchSuccess:
    TNT1 A 0
	{
	 A_GiveInventory("UsingMeleeAttack",1);
	 if (CallACS("MiscVarCheckDECORATE",10035) >= 5) { A_GiveInventory("MartArtsMaster2",1); }
	 if (CallACS("MiscVarCheckDECORATE",10035) == 4) { A_GiveInventory("MartArtsMaster1",1); }
	}
    GNTP M 3
	{
	 if (ACS_NamedExecuteWithResult("MiscVarCheckDECORATE",10035) >= 3) { A_SetTics(2); }
	 ACS_NamedExecute("GauntletFlashEffect",0,0,0,0);
	 A_PlaySound("PetraHeavyAttack",CHAN_VOICE,10.0);
	 A_PlaySound("GauntletSwing",CHAN_WEAPON);
	}
    GNTP N 3
	{
	 if (ACS_NamedExecuteWithResult("MiscVarCheckDECORATE",10035) >= 2) { A_SetTics(2); }
	 if (ACS_NamedExecuteWithResult("MiscVarCheckDECORATE",10035) >= 4) { A_SetTics(1); }
	 ACS_NamedExecute("GauntletFlashEffect",0,0,0,0);
	}
    TNT1 A 0 
	{
     ACS_NamedExecuteAlways("StartTensionCountDown");
	 if (CountInv("SpreaderAura2",AAPTR_PLAYER1) > 0)
	 {
      // Angle + 15, Pitch + 0
      A_SetAngle(angle+15);
      A_CustomPunch(ACS_NamedExecuteWithResult("GetPunchDamage",1),1,CPF_NOTURN,"GauntletPuff",ACS_NamedExecuteWithResult("GetMeleeRange",3));
      // Angle + 7.5, Pitch + 7.5
      A_SetAngle(angle-7.5);
      A_SetPitch(pitch+7.5);
      A_CustomPunch(ACS_NamedExecuteWithResult("GetPunchDamage",1),1,CPF_NOTURN,"GauntletPuff",ACS_NamedExecuteWithResult("GetMeleeRange",3));
      // Angle + 7.5, Pitch - 7.5
      A_SetPitch(pitch-15);
      A_CustomPunch(ACS_NamedExecuteWithResult("GetPunchDamage",1),1,CPF_NOTURN,"GauntletPuff",ACS_NamedExecuteWithResult("GetMeleeRange",3));
      // Angle + 0, Pitch + 0
      A_SetPitch(pitch+7.5);
      A_SetAngle(angle-7.5);
      A_CustomPunch(ACS_NamedExecuteWithResult("GetPunchDamage",1),1,CPF_NOTURN,"GauntletPuff",ACS_NamedExecuteWithResult("GetMeleeRange",3));
      // Angle - 7.5, Pitch - 7.5
      A_SetAngle(angle-7.5);
      A_SetPitch(pitch-7.5);
      A_CustomPunch(ACS_NamedExecuteWithResult("GetPunchDamage",1),1,CPF_NOTURN,"GauntletPuff",ACS_NamedExecuteWithResult("GetMeleeRange",3));
      // Angle - 7.5, Pitch + 7.5
      A_SetPitch(pitch+15);
      A_CustomPunch(ACS_NamedExecuteWithResult("GetPunchDamage",1),1,CPF_NOTURN,"GauntletPuff",ACS_NamedExecuteWithResult("GetMeleeRange",3));
      // Angle - 15, Pitch + 0
      A_SetPitch(pitch-7.5);
      A_SetAngle(angle-7.5);
      A_CustomPunch(ACS_NamedExecuteWithResult("GetPunchDamage",1),1,CPF_NOTURN,"GauntletPuff",ACS_NamedExecuteWithResult("GetMeleeRange",3));
      A_SetAngle(angle+15);
	 }
	 else
	 if (CountInv("SpreaderAura1",AAPTR_PLAYER1) > 0)
	 {
      A_SetAngle(angle+15);
      A_CustomPunch(ACS_NamedExecuteWithResult("GetPunchDamage",1),1,CPF_NOTURN,"GauntletPuff",ACS_NamedExecuteWithResult("GetMeleeRange",3));
      A_SetAngle(angle-15);
      A_CustomPunch(ACS_NamedExecuteWithResult("GetPunchDamage",1),1,CPF_NOTURN,"GauntletPuff",ACS_NamedExecuteWithResult("GetMeleeRange",3));
      A_SetAngle(angle-15);
      A_CustomPunch(ACS_NamedExecuteWithResult("GetPunchDamage",1),1,CPF_NOTURN,"GauntletPuff",ACS_NamedExecuteWithResult("GetMeleeRange",3));
      A_SetAngle(angle+15);
	 }
	 else
	 {
      A_CustomPunch(ACS_NamedExecuteWithResult("GetPunchDamage",1),1,CPF_NOTURN,"GauntletPuff",ACS_NamedExecuteWithResult("GetMeleeRange",3));
	 }

     A_TakeInventory("MeleeDestroyProjectiles",9999,0,AAPTR_PLAYER1);
	 if (CallACS("MiscVarCheckDECORATE",10035) == 0 && random(1,16) == 1) { A_GiveInventory("MeleeDestroyProjectiles",1,AAPTR_PLAYER1); }
	 if (CallACS("MiscVarCheckDECORATE",10035) == 1 && random(1,8) == 1) { A_GiveInventory("MeleeDestroyProjectiles",1,AAPTR_PLAYER1); }
	 if (CallACS("MiscVarCheckDECORATE",10035) == 2 && random(1,4) == 1) { A_GiveInventory("MeleeDestroyProjectiles",1,AAPTR_PLAYER1); }
	 if (CallACS("MiscVarCheckDECORATE",10035) == 3 && random(1,2) == 1) { A_GiveInventory("MeleeDestroyProjectiles",1,AAPTR_PLAYER1); }
	 if (CallACS("MiscVarCheckDECORATE",10035) >= 4 && random(1,1) == 1) { A_GiveInventory("MeleeDestroyProjectiles",1,AAPTR_PLAYER1); }
	 if (CountInv("MeleeDestroyProjectiles",AAPTR_PLAYER1) > 0)
	 {
	  A_SpawnItemEx ("ShieldPartPunchAttackNoReflect", 32, 0, 32, 0, 0, 0, 0, SXF_NOCHECKPOSITION);
	  A_SpawnItemEx ("ShieldPartPunchAttackNoReflect", 64, 0, 32, 0, 0, 0, 0, SXF_NOCHECKPOSITION);
	 }
     A_TakeInventory("MeleeDestroyProjectiles",9999,0,AAPTR_PLAYER1);
	}
    GNTP O 2
	{
	 if (ACS_NamedExecuteWithResult("MiscVarCheckDECORATE",10035) >= 3) { A_SetTics(1); }
	 ACS_NamedExecute("GauntletFlashEffect",0,0,0,0);
	}
    GNTP P 3
	{
	 if (ACS_NamedExecuteWithResult("MiscVarCheckDECORATE",10035) >= 3) { A_SetTics(2); }
	 ACS_NamedExecute("GauntletFlashEffect",0,0,0,0);
	}
    GNTP Q 1
	{
	 if (ACS_NamedExecuteWithResult("MiscVarCheckDECORATE",10035) >= 3) { A_SetTics(0); }
	 ACS_NamedExecute("GauntletFlashEffect",0,0,0,0);
	}
    GNTP R 1
	{
	 ACS_NamedExecute("GauntletFlashEffect",0,0,0,0);
	}
    GNTP S 1
	{
	 if (ACS_NamedExecuteWithResult("MiscVarCheckDECORATE",10035) >= 3) { A_SetTics(0); }
	 ACS_NamedExecute("GauntletFlashEffect",0,0,0,0);
	}
    GNTP T 1
	{
	 ACS_NamedExecute("GauntletFlashEffect",0,0,0,0);
	}
    GNTP U 1
	{
	 if (ACS_NamedExecuteWithResult("MiscVarCheckDECORATE",10035) >= 3) { A_SetTics(0); }
	 ACS_NamedExecute("GauntletFlashEffect",0,0,0,0);
	}
    GNTP V 1
	{
	 ACS_NamedExecute("GauntletFlashEffect",0,0,0,0);
	}
    GNTP W 7
	{
	 if (ACS_NamedExecuteWithResult("MiscVarCheckDECORATE",10035) >= 2) { A_SetTics(6); }
	 if (ACS_NamedExecuteWithResult("MiscVarCheckDECORATE",10035) >= 3) { A_SetTics(5); }
	 if (ACS_NamedExecuteWithResult("MiscVarCheckDECORATE",10035) >= 4) { A_SetTics(4); }
	 ACS_NamedExecute("GauntletFlashEffect",0,0,0,0);
	 A_TakeInventory("MartArtsMaster1",9999);
	 A_TakeInventory("MartArtsMaster2",9999);
	}
	GNTP W 0 A_TakeInventory("UsingMeleeAttack",9999,0,AAPTR_PLAYER1)
    Goto Ready
  }
}